<?xml version="1.0" encoding="ISO-8859-1"?>
<ui:composition template="../../_includes/ui-layout.xhtml"
	xmlns="http://www.w3.org/1999/xhtml" 
	xmlns:h="http://java.sun.com/jsf/html" 
	xmlns:f="http://java.sun.com/jsf/core" 
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.org/ui" 
	xmlns:pretty="http://ocpsoft.com/prettyfaces" 
	xmlns:c="http://java.sun.com/jsp/jstl/core"
	xmlns:of = "http://omnifaces.org/functions" >
	
	<ui:param name="controller" value="#{resourceController}" />
	
	<ui:define name="title"> CDA - Cadastro dos Recursos </ui:define>

	<ui:define name="resourceName"> Recurso </ui:define>
	
	<ui:define name="resourceDescription"> CDA - Cadastro dos Recursos. </ui:define>
	
	<ui:define name="designPage">
		<ui:include src="../../_includes/_form.xhtml"/>
	</ui:define>
		
	<ui:define name="content">
		<style type="text/css">
			.btn>[class*="icon-"] {
				color: rgb(255, 255, 255) !important;
			}
		</style>
	
		<div class="tab-content no-border padding-24">
			<div id="home" class="tab-pane in active">
				<div class="row">
					<div class="col-xs-12 col-sm-3 center">
						<span class="profile-picture"> 
							<img class="editable img-responsive" id="action" src="#{controller.contexPath()}imagens/resource.ico" />
						</span>
					</div>

					<div class="col-xs-12 col-sm-9">
						<div class="tabbable">
							<ul class="nav nav-tabs">
								<li class="active">
									<a data-toggle="tab" href="#resource">
										Recurso
									</a>
								</li>

								<li>
									<a data-toggle="tab" href="#actions">
										Ações
									</a>
								</li>

								<li>
									<a data-toggle="tab" href="#pages">
										Páginas
									</a>
								</li>
							</ul>
							
							<div class="tab-content">
								<div id="resource" class="tab-pane in active">
									<div class="form-horizontal">
										<div class="form-group">
											<label class="col-sm-2 control-label no-padding-right" for="name"> Nome: </label>
											<div class="col-sm-10">
												<p:inputText id="name" value="#{resourceController.model.name}" placeholder="Nome" styleClass="col-xs-12 col-sm-10" />
											</div>
										</div>
										
										<div class="form-group">
											<label class="col-sm-2 control-label no-padding-right" for="locationOfFiles"> Diretório do arquivos: </label>
											<div class="col-sm-10">
												<p:inputText id="locationOfFiles" value="#{resourceController.model.locationOfFiles}" placeholder="Diretório do arquivos" styleClass="col-xs-12 col-sm-10" />
											</div>
										</div>
										
										<div class="form-group">
											<label class="col-sm-2 control-label no-padding-right" for="indexPage"> Página principal: </label>
											<div class="col-sm-10">
												<p:inputText id="indexPage" value="#{resourceController.model.indexPage}" placeholder="Página principal" styleClass="col-xs-12 col-sm-10" />
											</div>
										</div>
										
										<div class="form-group">
											<label class="col-sm-2 control-label no-padding-right" for="icon"> Ícone: </label>
											<div class="col-sm-10">
												<p:inputText id="icon" value="#{resourceController.model.icon}" maxlength="25" placeholder="Ícone" styleClass="col-xs-12 col-sm-10" />
											</div>
										</div>
										
										<div class="form-group">
											<label class="col-sm-2 control-label no-padding-right" for="controllerBean"> Controller: </label>
											<div class="col-sm-10">
												<p:inputText id="controllerBean" value="#{resourceController.model.controllerBean}" placeholder="Controller" styleClass="col-xs-12 col-sm-10" />
											</div>
										</div>
										
										<div class="form-group">
											<label class="col-sm-2 control-label no-padding-right" for="objectClass"> Classe Model: </label>
											<div class="col-sm-10">
												<p:inputText id="objectClass" value="#{resourceController.model.objectClass}" maxlength="25" placeholder="Classe Model" styleClass="col-xs-12 col-sm-10" />
											</div>
										</div>

										<div class="form-group">
											<label class="col-sm-2 control-label no-padding-right" for="objectClass"> Domínio: </label>
											<div class="col-sm-10">
												<h:selectOneListbox value="#{resourceController.model.domain}" styleClass="col-xs-12 col-sm-10" size="5">
													<f:selectItems value="#{resourceController.domains}" var="domain" itemLabel="#{domain.name}" itemValue="#{domain}"/>
												</h:selectOneListbox>
											</div>
										</div>
									</div>
								</div>
								
								<div id="actions" class="tab-pane">
									<p:pickList id="pklActions" styleClass="table table-striped table-bordered center" 
										value="#{resourceController.resourceAction}" var="action" itemLabel="#{action.name}" itemValue="#{action}" converter="modelConverter">
										<f:facet name="sourceCaption">Disponivel</f:facet>  
									
										<f:facet name="targetCaption">Adicionado</f:facet>
									</p:pickList>
								</div>
								
								<div id="pages" class="tab-pane">
									<div class="form-horizontal">
										<div class="form-group">
											<label class="col-sm-2 control-label no-padding-right" for="file"> Local/Arquivo da página: </label>
											<div class="col-sm-10">
												<p:inputText id="file" value="#{resourceController.page.file}" placeholder="Local/Arquivo da página" styleClass="col-xs-12 col-sm-10" />
											</div>
										</div>
										
										<div class="form-group">
											<label class="col-sm-2 control-label no-padding-right" for="pageURL"> Página URL: </label>
											<div class="col-sm-10">
												<p:inputText id="pageURL" value="#{resourceController.page.pageURL}" placeholder="Página URL" styleClass="col-xs-12 col-sm-10" />
											</div>
										</div>
										
										<div class="form-group">
											<label class="col-sm-2 control-label no-padding-right" for="codeFile"> Código: </label>
											<div class="col-sm-10">
												<p:inputText id="codeFile" value="#{resourceController.page.codeFile}" placeholder="Código" styleClass="col-xs-12 col-sm-10" />
											</div>
										</div>
										
										<div class="center">
											<p:commandButton styleClass="btn btn-sm btn-default" icon="icon-plus bigger-110" update=":frm:dtPages codeFile pageURL file" value="Adicionar" title="Adicionar" action="#{resourceController.newPage()}">
												<p:collector value="#{resourceController.page}" addTo="#{resourceController.model.files}" />
											</p:commandButton>
										</div>
										
										<br />
										
										<p:dataTable id="dtPages" var="page" value="#{resourceController.model.files}" emptyMessage="Sem Registros" tableStyleClass="table table-striped table-bordered" >
											<p:column headerText="Página" styleClass="col-sm-11">
												#{page.file}
											</p:column>
											<p:column styleClass="col-sm-1 center">
												<p:commandButton title="Remover" styleClass="btn btn-danger btn-xs" icon="icon-trash" update=":frm:dtPages" value=" ">
													<p:collector value="#{page}" removeFrom="#{resourceController.model.files}" />
												</p:commandButton>
											</p:column>
										</p:dataTable>
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</ui:define>
</ui:composition>
